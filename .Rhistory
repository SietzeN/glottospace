ggplot2::ggplot(data = distpivot, ggplot2::aes(x=glottocode_x, y=glottocode_y, fill=distance) ) +
ggplot2::geom_raster() +
ggplot2::scale_fill_distiller(palette = "magma")
ggplot2::ggplot(data = distpivot, ggplot2::aes(x=glottocode_x, y=glottocode_y, fill=distance) ) +
ggplot2::geom_raster() +
ggplot2::scale_fill_distiller(palette = "BuPu", na.value = "grey50")
ggplot2::ggplot(data = distpivot, ggplot2::aes(x=glottocode_x, y=glottocode_y, fill=distance) ) +
ggplot2::geom_raster() +
ggplot2::scale_fill_distiller(palette = "Reds", na.value = "grey50")
ggplot2::ggplot(data = distpivot, ggplot2::aes(x=glottocode_x, y=glottocode_y, fill=distance) ) +
ggplot2::geom_raster() +
ggplot2::scale_fill_distiller(palette = rev("Reds"), na.value = "grey50")
ggplot2::ggplot(data = distpivot, ggplot2::aes(x=glottocode_x, y=glottocode_y, fill=distance) ) +
ggplot2::geom_raster() +
ggplot2::scale_fill_distiller(palette = "Reds", na.value = "grey50", direction = -1)
ggplot2::ggplot(data = distpivot, ggplot2::aes(x=glottocode_x, y=glottocode_y, fill=distance) ) +
ggplot2::geom_raster() +
ggplot2::scale_color_manual(values = rev(RColorBrewer::brewer.pal(3,'Blues')))
ggplot2::ggplot(data = distpivot, ggplot2::aes(x=glottocode_x, y=glottocode_y, fill=distance) ) +
ggplot2::geom_raster() +
ggplot2::scale_color_manual(values = rev(RColorBrewer::brewer.pal(3,'YlOrRd')))
RColorBrewer::brewer.pal(3,'YlOrRd')
ggplot2::ggplot(data = distpivot, ggplot2::aes(x=glottocode_x, y=glottocode_y, fill=distance) ) +
ggplot2::geom_raster() +
ggplot2::scale_fill_distiller(palette = "YlOrRd", na.value = "grey50")
ggplot2::ggplot(data = distpivot, ggplot2::aes(x=glottocode_x, y=glottocode_y, fill=distance) ) +
ggplot2::geom_raster() +
ggplot2::scale_fill_distiller(palette = "YlOrRd", na.value = "grey50", direction = -1)
ggplot2::ggplot(data = distpivot, ggplot2::aes(x=glottocode_x, y=glottocode_y, fill=distance) ) +
ggplot2::geom_raster() +
ggplot2::scale_fill_distiller(palette = "YlOrRd", na.value = "grey50", direction = 1)
ggplot2::ggplot(data = distpivot, ggplot2::aes(x=glottocode_x, y=glottocode_y, fill=distance) ) +
ggplot2::geom_raster() +
ggplot2::scale_fill_distiller(palette = "YlOrRd", na.value = "grey50", direction = 1) +
ggplot2::labs(x = "glottocode", y = "glottocode")
ggplot2::ggplot(data = distpivot, ggplot2::aes(x=glottocode_x, y=glottocode_y, fill=distance) ) +
ggplot2::geom_raster() +
ggplot2::scale_fill_distiller(palette = "YlOrRd", na.value = "grey50", direction = 1) +
ggplot2::labs(x = "glottocode", y = "glottocode") +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
ggplot2::ggplot(data = distpivot, ggplot2::aes(x=glottocode_x, y=glottocode_y, fill=distance) ) +
ggplot2::geom_raster() +
ggplot2::scale_fill_distiller(palette = "YlOrRd", na.value = "grey50", direction = 1) +
ggplot2::labs(x = "glottocode", y = "glottocode") +
ggplot2::theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
ggplot2::ggplot(data = distpivot, ggplot2::aes(x=glottocode_x, y=glottocode_y, fill=distance) ) +
ggplot2::geom_raster() +
ggplot2::scale_fill_distiller(palette = "YlOrRd", na.value = "grey50", direction = 1) +
ggplot2::labs(x = "glottocode", y = "glottocode") +
ggplot2::theme(axis.text.x = ggplot2::element_text(angle = 90, vjust = 0.5, hjust=1))
load_all()
glottodata <- glottoget(meta = TRUE)
glottodist <- glottodist(glottodata = glottodata)
glottoplot(glottodist)
glottodist
load_all()
glottoplot(glottodist)
glottodist
distmat <- contransform_distmat(glottodist)
distmat
distpivot <- distmat %>%
as.data.frame() %>%
tibble::rownames_to_column("glottocode_x") %>%
tidyr::pivot_longer(-c(glottocode_x), names_to = "glottocode_y", values_to = "distance")
distpivot
heatmap <- ggplot2::ggplot(data = distpivot, ggplot2::aes(x=glottocode_x, y=glottocode_y, fill=distance) ) +
ggplot2::geom_raster() +
ggplot2::scale_fill_distiller(palette = "YlOrRd", na.value = "grey50", direction = 1) +
ggplot2::labs(x = "glottocode", y = "glottocode") +
ggplot2::theme(axis.text.x = ggplot2::element_text(angle = 90, vjust = 0.5, hjust=1))
heatmap
glottodata
glottodata <- glottoget()
glottodata
naviewer(glottodata)
naviewer(glottodata, "glottocode")
glottoplot(glottodist, type = "heatmap")
load_all()
glottoplot(glottodist, type = "heatmap")
document()
document()
load_all()
load_all()
install()
glottodata <- glottoget(meta = TRUE)
glottodata_original <- glottodata
glottodata_original
glottodata[[1]]
glottodata[1]
glottodata <- glottodata[[1]]
glottodata_addtable(glottodata_original, glottodata)
glottodata_addtable(glottodata_original, glottodata, name = "glottodata")
glottodata
glottodata <- glottoget(meta = TRUE)
glottodata[-1]
glottometa <- glottodata[-1]
glottodata <- glottodata[[1]]
hasmeta <- TRUE
glottodata_addtable(glottometa, glottodata, name = "glottodata")
glottodata_addtable(glottodata, glottometa, name = "glottodata")
funcsource(glottodata_addtable())
funcsource(glottodata_addtable)
funsource(glottodata_addtable)
load_all()
funcsource(glottodata_addtable)
glottodata
is_list(glottodata)
length(glottodata) != 1
(is_list(glottodata) & length(glottodata) != 1)
glottodata
glottodata <- list(glottodata)
glottodata
glottodata <- glottoget(meta = TRUE)
glottometa <- glottodata[-1]
glottometa
names(glottometa)
is_list(glottometa)
join_glottometa(glottodata = glottodata, glottometa = glottometa)
load_all()
join_glottometa(glottodata = glottodata, glottometa = glottometa)
load_all()
glottodata <- glottoget(meta = TRUE)
glottospacedata <- glottospace(glottodata)
glottocheck_hasmeta(glottodata)
glottometa <- glottodata[-1]
glottodata <- glottodata[[1]]
glottodata
join_glottometa(glottodata = glottodata, glottometa = glottometa)
glottodata <- glottoget(meta = TRUE)
glottospacedata <- glottospace(glottodata)
glottocheck_hasmeta(glottodata)
glottometa <- glottodata[-1]
glottodata <- glottodata[[1]]
hasmeta <- TRUE
if(class(glottodata) == "data.frame"){
glottodata <- glottodata_makespatial(glottodata)
}
if(polygons == TRUE){
glottodata <- points2pols(glottopoints = glottodata, method = method, radius = radius, country = country, continent = continent)
}
if(hasmeta){
glottodata <- join_glottometa(glottodata = glottodata, glottometa = glottometa)
}
hasmeta
glottodata <- join_glottometa(glottodata = glottodata, glottometa = glottometa)
glottodata
if(glottocheck_hasmeta(glottodata) ){
glottometa <- glottodata[-1]
glottodata <- glottodata[[1]]
hasmeta <- TRUE
}
glottometa
glottodata
class(glottodata) == "data.frame"
is_sf(glottodata)
!is_sf(glottodata)
join_glottometa(glottodata = glottodata, glottometa = glottometa)
glottodata
is_list(glottodata)
length(glottodata)
glottodata
glottometa
c(glottodata, glottometa)
list("glottodata" = glottodata)
glottodata <- list("glottodata" = glottodata)
names(glottodata) <- "glottodata"
c(glottodata, glottometa)
load_all()
glottodata <- glottoget(meta = TRUE)
glottospacedata <- glottospace(glottodata)
is_list(glottodata)
glottodata
glottodata <- glottodata_makespatial(glottodata)
glottometa <- glottodata[-1]
glottodata <- glottodata[[1]]
hasmeta <- TRUE
glottodata <- glottodata_makespatial(glottodata)
is_list(glottodata)
is_list(glottodata)
is_sf(glottodata)
load_all()
glottodata <- glottoget(meta = TRUE)
glottospacedata <- glottospace(glottodata)
glottospacedata
glottopoints <- glottofilter(continent = "South America")
glottopols <- glottospace(glottopoints, polygons = TRUE, method = "voronoi", continent = "South America")
glottodata
glottocheck_hasmeta(glottodata)
glottodata <- glottofilter(continent = "South America")
glottocheck_hasmeta(glottodata)
load_all()
glottodata <- glottofilter(continent = "South America")
glottopols <- glottospace(glottopoints, polygons = TRUE, method = "voronoi", continent = "South America")
glottomap(glottopols)
glottopols
c(!is.null(method), !is.null(radius), !is.null(country), !is.null(continent) )
method = NULL
radius = NULL
country = NULL
continent = NULL
any( c(!is.null(method), !is.null(radius), !is.null(country), !is.null(continent) ) )
any( c(!is.null(method), !is.null(radius), !is.null(country), !is.null(continent) ) )
load_all()
glottopoints <- glottofilter(continent = "South America")
glottopols <- glottospace(glottopoints, method = "voronoi", continent = "South America")
glottomap(glottopols)
glottosearch(find = "yurakar")
glottosearch(find = "yurakar")[,"name"]
glottosearch(find = "matsigenka")[,"name"]
glottosearch(find = "matsigenka", tolerance = 0.2)[,"name"]
?geoget
load_all()
?geoget
document()
?geoget
get_geodata(download = "elevation", country = "Peru")
nlclim <- geoget(download = "climate", country = "Netherlands")
glottomap(glottodata = nlclim)
geomap(nlclim)
?geomap
is_sf(nlclim)
nlclim
nlclim <- geoget(download = "climate", country = "Netherlands")
nlclim
geodata <- raster::getData(name = "worldclim", var = "bio", res = 10)
geodata
load_all()
nlclim <- geoget(download = "climate", country = "Netherlands")
nlclim
geomap(nlclim)
nlclim[[1]]
geomap(nlclim[[1]])
country = "Netherlands"
geodata <- raster::getData(name = "worldclim", var = "bio", res = 10, country = country)
funcsource(extractgeodata)
climate <- geoget(download = "climate")[[1]]
geomap(climate)
dutchies <- glottofilter(country = "Netherlands")
climatedutchies <- extractgeodata(glottodata = dutchies, geodata = climate, radius = 10, fun = "mean")
climatedutchies
climate
names(climate) <- "temperature"
climate
dutchies <- glottofilter(country = "Netherlands")
climatedutchies <- extractgeodata(glottodata = dutchies, geodata = climate, radius = 10, fun = "mean")
glottomap(climatedutchies, color = "temperature_mean")
climate <- geoget(download = "climate")[[12]]
names(climate) <- "precipitation"
climate <- geoget(download = "climate")[[12]]
names(climate) <- "precipitation"
geomap(climate)
dutchies <- glottofilter(country = "Netherlands")
climatedutchies <- extractgeodata(glottodata = dutchies, geodata = climate, radius = 10, fun = "mean")
glottomap(climatedutchies, color = "precipitation_mean")
glottomap(climatedutchies, color = "precipitation_mean", ptsize = 1)
document()
load_all()
document()
load_all()
install()
glottodata <- glottoget()
glottospacedata <- glottospace(glottodata)
glottodata <- glottoget(meta = TRUE)
glottospacedata <- glottospace(glottodata)
glottodata <- glottoget()
glottospacedata <- glottospace(glottodata)
glottospace(method = "buffer", radius = 250)
glottospace(glottodata, method = "buffer", radius = 250)
glottospacedata <- glottospace(glottodata, method = "buffer", radius = 250)
glottospacedata <- glottospace(glottodata, method = "buffer", radius = 1)
glottospacedata <- glottospace(glottodata, method = "buffer", radius = 250)
glottomap(glottospacedata)
glottospacedata <- glottospace(glottodata, method = "buffer", radius = 100)
glottomap(glottospacedata)
glottospacedata <- glottospace(glottodata, method = "buffer", radius = 10)
glottomap(glottospacedata)
glottospacedata <- glottospace(glottodata, method = "voronoi")
glottomap(glottospacedata)
document()
glottospacedata <- glottospace(glottodata, method = "buffer", radius = 5)
glottomap(glottospacedata)
document()
load_all()
install()
library(devtools)
load_all()
?gsub_dir
getwd()
# gsub_dir(dir = "Scripts", pattern = "color = 'green'", replacement = "color = 'blue'")
#
# # Define function to find-and-replace text in a single file
# file_find_replace <- function(filepath, pattern, replacement) {
#   file_contents <- readLines(filepath)
#   updated_contents <- gsub(x = file_contents, pattern = pattern, replacement = replacement)
#   cat(updated_contents, file = filepath, sep = "\n")
# }
#
# # Apply the function to each of the R scripts in the directory
glottospace_scripts <- list.files(path = "C:/Users/sjnor/surfdrive/PROJECTS_SN/SAPPHIRE/R/glottospace", pattern = "(r|R)$")
glottospace_scripts
# gsub_dir(dir = "Scripts", pattern = "color = 'green'", replacement = "color = 'blue'")
#
# # Define function to find-and-replace text in a single file
# file_find_replace <- function(filepath, pattern, replacement) {
#   file_contents <- readLines(filepath)
#   updated_contents <- gsub(x = file_contents, pattern = pattern, replacement = replacement)
#   cat(updated_contents, file = filepath, sep = "\n")
# }
#
# # Apply the function to each of the R scripts in the directory
glottospace_scripts <- list.files(path = "C:/Users/sjnor/surfdrive/PROJECTS_SN/SAPPHIRE/R/glottospace/R", pattern = "(r|R)$")
glottospace_scripts
# createglottodata
# createglottosubdata
xfun::gsub_dir(dir = "C:/Users/sjnor/surfdrive/PROJECTS_SN/SAPPHIRE/R/glottospace/R", pattern = "createglottodata", replacement = "glottocreatedata")
# createglottodata
# createglottosubdata
xfun::gsub_dir(dir = "C:/Users/sjnor/surfdrive/PROJECTS_SN/SAPPHIRE/R/glottospace/R", pattern = "createglottosubdata", replacement = "glottocreatesubdata")
xfun::gsub_dir(dir = "C:/Users/sjnor/surfdrive/PROJECTS_SN/SAPPHIRE/R/glottospace/R", pattern = "create_", replacement = "glottocreate_")
glottodata <- "glottobase"
tools::file_ext(glottodata)
tools::file_ext(glottodata) == ""
glottodata <- NULL
tools::file_ext(glottodata) == ""
is.null(glottodata) | glottodata == "glottobase"
glottoget(filename = NULL, meta = meta, simplify = simplify, create = "glottosubdata")
meta = FALSE
simplify = TRUE
glottoget(filename = NULL, meta = meta, simplify = simplify, create = "glottosubdata")
document()
?glottodata
document()
?glottodata
?glottoget
?glottodata
document()
?glottodata
document()
?glottodata
document()
?glottodata
t <- glottodata ()
load_all()
t <- glottodata ()
t <- glottodata()
load_all()
t <- glottodata()
document()
t <- glottodata()
?glottodata
load_all()
?glottodata
t <- glottodata()
glottodata()
library(devtools)
devtools::install_github("SietzeN/glottospace")
check()
use_package("Hmisc")
check()
use_package("purrr")
check()
use_dev_package("dplyr")
check()
glottosearch("yucu1253")
glottosearch(find = "yucu1253")
glottosearch(find = "tani1257")
glottomap(country = "colombia")
glottomap(country = "Colombia")
glottomap(country = "Colombia", type = "dynamic")
glottomap(country = "Peru", type = "dynamic")
glottomap(country = "Brazil", type = "dynamic")
glottomap(glottocode = c("yucu1253", "tani1257", "ticu1254", "orej1242", "nade1244"), type = "dynamic")
glottomap(glottocode = c("yucu1253", "tani1257", "ticu1254", "orej1242", "nade1244"), type = "dynamic", ptsize = 0.85)
glottomap(country = "Brazil", type = "dynamic")
glottomap(glottocode = c("yucu1253", "tani1257", "ticu1254", "orej1242", "nade1244", "mara1409"), type = "dynamic", ptsize = 0.85)
glottomap(glottocode = c( "ticu1254"), type = "dynamic", ptsize = 0.85)
glottosearch("ticu1254")
glottosearch(find = "ticu1254")
glottomap(glottocode =  c("yucu1253", "tani1257", "ticu1245", "orej1242", "nade1244", "mara1409"), type = "dynamic", ptsize = 0.85)
glottofilter(glottocode =  c("yucu1253", "tani1257", "ticu1245", "orej1242", "nade1244", "mara1409"))
load_all()
glottoget("demodata")
glottosearch(find = "chichom")[,"name"]
glottosearch(find = "chichom")[,c("name", "family_name")]
load_all()
glottosearch("chichom")[,c("name", "family_name")]
source('C:/Users/sjnor/surfdrive/PROJECTS_SN/SAPPHIRE/R/glottospace/R/TODO.R', encoding = 'UTF-8', echo=TRUE)
glottodata <- glottoget("demodata")
glottodatabase <- glottojoin(glottodata, with = "glottobase")
glottodataspace <- glottojoin(glottodata, with = "glottospace")
# Join with a dist object
dist <- geodist(glottodataspace)
glottodatadist <- glottojoin(glottodata, with = dist)
# Join a list of glottodata tables into a single table
glottodatalist <- glottocreate_subdata(glottocodes = c("yucu1253", "tani1257"),
variables = 3, groups = c("a", "b"), n = 2, meta = FALSE)
glottodatatable <- glottojoin(glottodata = glottodatalist)
glottodata <- glottoget("demodata", meta = TRUE)
glottodist <- glottodist(glottodata = glottodata)
# As we've seen above, in case you have glottodata without a structure table, you can add it:
glottodata <- glottoget("demodata", meta = FALSE)
structure <- glottocreate_structuretable()
glottodata <- glottodata_addtable(glottodata, structure, name = "structure")
glottodata <- glottoget("demodata", meta = TRUE)
glottodist <- glottodist(glottodata = glottodata)
glottoplot(glottodist)
glottodata <- glottoget("demodata")
glottospacedata <- glottospace(glottodata, method = "buffer", radius = 5)
# By default, the projection of maps is equal area, and shape is not preserved:
glottomap(glottospacedata)
?glottomap
?glottomap_static
citation()
citation("glottospace")
use_citation()
as.person("Sietze Norder")
citation("glottospace")
load_all()
citation("glottospace")
load_all()
citation("glottospace")
load_all()
citation("glottospace")
version("glottospace")
packageVersion("glottospace")
paste("R package version", packageVersion("glottospace"))
load_all()
citation("glottospace")
citation("glottospace")
?citation
cit <- citation("glottospace")
class(cit)
cit[1]
cit[[1]]
cit$citation
cit@citation
citation("sf")
document()
load_all()
document()
load_all()
install()
glottofilter(continent = c("Europe", "Asia"))
?glottofilter
eurasia <- glottofilter(continent = c("Europe", "Asia"))
wari <- glottofilter(glottodata = glottodata, glottocode = "wari1268")
indo_european <- glottofilter(glottodata = glottodata, family_name = 'Indo-European')
south_america <- glottofilter(glottodata = glottodata, continent = "South America")
colovenz <- glottofilter(glottodata = glottodata, country = c("Colombia", "Venezuela"))
eurasia <- glottofilter(continent = c("Europe", "Asia"))
wari <- glottofilter(glottodata = glottodata, glottocode = "wari1268")
indo_european <- glottofilter(glottodata = glottodata, family_name = 'Indo-European')
south_america <- glottofilter(glottodata = glottodata, continent = "South America")
colovenz <- glottofilter(country = c("Colombia", "Venezuela"))
# arawtuca <- glottofilter(glottodata = glottodata, expression = family_name %in% c("Arawakan", "Tucanoan"))
glottofilter(country = c("Colombia", "Venezuela"))
eurasia <- glottofilter(continent = c("Europe", "Asia"))
wari <- glottofilter(glottodata = glottodata, glottocode = "wari1268")
indo_european <- glottofilter(glottodata = glottodata, family_name = 'Indo-European')
south_america <- glottofilter(glottodata = glottodata, continent = "South America")
colovenz <- glottofilter(country = c("Colombia", "Venezuela"))
# arawtuca <- glottofilter(glottodata = glottodata, expression = family_name %in% c("Arawakan", "Tucanoan"))
library(devtools)
load_all()
glottosearch("nadahup")
devtools::install_github("SietzeN/glottospace")
warnings()
glottosearch("nadahupp")
dependency_list <- devtools::dev_package_deps()
dependency_list
dependency_list[-1]
dependency_list[-1,]
devtools::update_packages(dependency_list[,-1]$package, dependencies=TRUE)
TRUE    CRAN
> devtools::update_packages(dependency_list[,-1]$package
TRUE    CRAN
dependency_list[,-1]$package
TRUE    CRAN
dependency_list$package[-1]
devtools::update_packages(dependency_list$package[-1], dependencies=TRUE)
?glottosearch
glottosearch("nadahup")
?apply
?select
?unique
?apply
glottoget("demodata")
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>",
fig.path = "man/figures/README-",
out.width = "100%"
)
citation("glottospace")
library(glottospace)
## Plot point data:
glottomap(continent = "South America", color = "isolate")
## Filter by continent
glottopoints <- glottofilter(continent = "South America")
# Interpolate points to polygons:
glottopols <- glottospace(glottopoints, method = "voronoi", continent = "South America")
# Plot polygon data:
glottomap(glottodata = glottopols, color = "family_size_rank")
# Search languages:
glottosearch(find = "chichom")[,c("name", "family_name")]
glottocode_online("shua1257")
peruvians <- glottofilter(country = "Peru")
document()
document()
load_all()
document()
q()
