---
output: rmarkdown::github_document
always_allow_html: true
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```



# glottospace

<!-- badges: start -->
[![Lifecycle: experimental](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://lifecycle.r-lib.org/articles/stages.html#experimental)
<!-- badges: end -->

## R package for the geospatial analysis of linguistic and cultural data. 
    Examples include: matching linguistic datasets to their location, 
    calculating distances between languages based on their spatial location or linguistic features, 
    visualizing linguistic data on a map.

## Installation

You can install the development version of glottospace from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("SietzeN/glottospace")
```
## Introduction to glottospace

### Plotting language locations on a map
Imagine you're working with languages in a particular region, and want to visualize them on a map.You could for example filter all languages in South America, and show which ones of them are isolate languages:

```{r glottospoints_sa}
library(glottospace)
## Filter by continent
glottopoints <- glottofilter(continent = "South America")
## Plot point data:
glottomap(glottodata = glottopoints, color = "isolate")
```

Languages are often represented with points, while in reality the speakers of a language can inhabit vast areas. Glottospace works with point and polygon data. When polygon data is not available, you can interpolate the points and plot those. 

```{r glottopols_sa}
# Interpolate points to polygons:
glottopols <- points2pols(glottopoints, method = "voronoi", continent = "South America")
# Plot polygon data:
glottomap(glottodata = glottopols, color = "family_size_rank")

```

### Adding contextual data for specific languages

Imagine you are interested in a particular set of languages, and want to add some contextual information.

```{r glottosearch}
# Search languages:
glottosearch(find = "Dutsch")
```

There are 6 glots that resemble our search term. Let's check on [glottolog](https://glottolog.org/) if Dutch is the language we're looking for.

```{r online}
glottocode_online("dutc1256")
```

Yes, that's the one. Let's check where Dutch is located in comparison to other languages in the Netherlands. 
```{r}
dutchies <- glottofilter(country = "Netherlands")
```


Get and extract environmental data. 

```{r geodata}
elevation <- get_geodata(download = "elevation", country = "Netherlands")
elevdutchies <- extractgeodata(glottodata = dutchies, geodata = elevation)
```
Let's plot the elevation of the Dutchies:

```{r map_dutchies}
glottomap(glottodata = elevdutchies, color = "elevation", label = "name", ptsize = 0.85)
```


## Workflow of glottospace

### getdata
Download linguistic, cultural, geographic, and environmental data. Generate empty data structures that help you to add your own data in a structured way. 

### checkdata
Interactive quality checks of user-provided data. Quickly check data coverage, missing values, etc. 

### cleandata
Clean data where necessary, recode values, select columns/remove redundant

### joindata
, and integrating them to use their full potential.
Join user-provided data with glottodata, add locations

### glottosearch & glottofilter
searchdata: filter, select, query
search: search languages, filter all languages in a certain country

### geodata
add data, extract elevation of each language

### geoglotdist
geodistances: calculating distances between languages, nearest languages, etc.
Quantify differences and similarities between languages
glottodistances: calculating similarities between languages based on linguistic/cultural features

### visualize
Visualizing linguistic and cultural data on a map
Visualizing differences between languages based on linguistic, cultural, and environmental features. 

### save & export
Save output generated by glottospace (data, figures, maps, etc.). 


## Some basic concepts: data formats

The glottospace package has three built-in datasets: glottobase, glottospace, and userdata. 

```{r}
data(package = "glottospace")
```

1. glottobase: This is a boosted/enriched version of [glottolog](https://glottolog.org/) data. It is used as reference dataset in several functions. The glottocodes are used as unique IDs to match different data sources. 
``` {r, message = FALSE}
data("glottobase")
# For more information about glottobase
?glottobase
colnames(glottobase)
```

2. glottospace. A simple dataset with glottocodes and a geometry colum. The glottocodes are used to match a language to a location. 
``` {r}
glottospace <- get_glottospace()
head(glottospace)
```

3. userdata. This is user-provided data that consist of a glottocode and any number of linguistic and/or cultural variables (features). 
``` r
glottodata <- get_glottodata(meta = FALSE)
glottodata
```



